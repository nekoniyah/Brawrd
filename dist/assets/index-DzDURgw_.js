(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))T(v);new MutationObserver(v=>{for(const I of v)if(I.type==="childList")for(const A of I.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&T(A)}).observe(document,{childList:!0,subtree:!0});function g(v){const I={};return v.integrity&&(I.integrity=v.integrity),v.referrerPolicy&&(I.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?I.credentials="include":v.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function T(v){if(v.ep)return;v.ep=!0;const I=g(v);fetch(v.href,I)}})();var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kt(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var Ut={exports:{}};var Ht;function qt(){return Ht||(Ht=1,(function(j){(function(l,g,T,v){var I=["","webkit","Moz","MS","ms","o"],A=g.createElement("div"),P="function",R=Math.round,O=Math.abs,J=Date.now;function _(e,r,i){return setTimeout(Ie(e,i),r)}function S(e,r,i){return Array.isArray(e)?(M(e,i[r],i),!0):!1}function M(e,r,i){var u;if(e)if(e.forEach)e.forEach(r,i);else if(e.length!==v)for(u=0;u<e.length;)r.call(i,e[u],u,e),u++;else for(u in e)e.hasOwnProperty(u)&&r.call(i,e[u],u,e)}function Y(e,r,i){var u="DEPRECATED METHOD: "+r+`
`+i+` AT 
`;return function(){var d=new Error("get-stack-trace"),E=d&&d.stack?d.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",D=l.console&&(l.console.warn||l.console.log);return D&&D.call(l.console,u,E),e.apply(this,arguments)}}var H;typeof Object.assign!="function"?H=function(r){if(r===v||r===null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(r),u=1;u<arguments.length;u++){var d=arguments[u];if(d!==v&&d!==null)for(var E in d)d.hasOwnProperty(E)&&(i[E]=d[E])}return i}:H=Object.assign;var W=Y(function(r,i,u){for(var d=Object.keys(i),E=0;E<d.length;)(!u||u&&r[d[E]]===v)&&(r[d[E]]=i[d[E]]),E++;return r},"extend","Use `assign`."),ce=Y(function(r,i){return W(r,i,!0)},"merge","Use `assign`.");function B(e,r,i){var u=r.prototype,d;d=e.prototype=Object.create(u),d.constructor=e,d._super=u,i&&H(d,i)}function Ie(e,r){return function(){return e.apply(r,arguments)}}function ue(e,r){return typeof e==P?e.apply(r&&r[0]||v,r):e}function b(e,r){return e===v?r:e}function x(e,r,i){M(q(r),function(u){e.addEventListener(u,i,!1)})}function N(e,r,i){M(q(r),function(u){e.removeEventListener(u,i,!1)})}function U(e,r){for(;e;){if(e==r)return!0;e=e.parentNode}return!1}function F(e,r){return e.indexOf(r)>-1}function q(e){return e.trim().split(/\s+/g)}function k(e,r,i){if(e.indexOf&&!i)return e.indexOf(r);for(var u=0;u<e.length;){if(i&&e[u][i]==r||!i&&e[u]===r)return u;u++}return-1}function $(e){return Array.prototype.slice.call(e,0)}function ie(e,r,i){for(var u=[],d=[],E=0;E<e.length;){var D=e[E][r];k(d,D)<0&&u.push(e[E]),d[E]=D,E++}return u=u.sort(function(V,K){return V[r]>K[r]}),u}function he(e,r){for(var i,u,d=r[0].toUpperCase()+r.slice(1),E=0;E<I.length;){if(i=I[E],u=i?i+d:r,u in e)return u;E++}return v}var Oe=1;function We(){return Oe++}function ge(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||l}var Je=/mobile|tablet|ip(ad|hone|od)|android/i,et="ontouchstart"in l,Tt=he(l,"PointerEvent")!==v,fe=et&&Je.test(navigator.userAgent),Ee="touch",bt="pen",ze="mouse",Et="kinect",_t=25,G=1,ye=2,z=4,Q=8,Re=1,we=2,Se=4,Ne=8,te=16,oe=we|Se,de=Ne|te,Ce=oe|de,Be=["x","y"],_e=["clientX","clientY"];function Z(e,r){var i=this;this.manager=e,this.callback=r,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(u){ue(e.options.enable,[e])&&i.handler(u)},this.init()}Z.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(ge(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&N(this.element,this.evEl,this.domHandler),this.evTarget&&N(this.target,this.evTarget,this.domHandler),this.evWin&&N(ge(this.element),this.evWin,this.domHandler)}};function tt(e){var r,i=e.options.inputClass;return i?r=i:Tt?r=Me:fe?r=Ue:et?r=je:r=Pe,new r(e,rt)}function rt(e,r,i){var u=i.pointers.length,d=i.changedPointers.length,E=r&G&&u-d===0,D=r&(z|Q)&&u-d===0;i.isFirst=!!E,i.isFinal=!!D,E&&(e.session={}),i.eventType=r,nt(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function nt(e,r){var i=e.session,u=r.pointers,d=u.length;i.firstInput||(i.firstInput=Xe(r)),d>1&&!i.firstMultiple?i.firstMultiple=Xe(r):d===1&&(i.firstMultiple=!1);var E=i.firstInput,D=i.firstMultiple,X=D?D.center:E.center,V=r.center=ke(u);r.timeStamp=J(),r.deltaTime=r.timeStamp-E.timeStamp,r.angle=Le(X,V),r.distance=Ae(X,V),it(i,r),r.offsetDirection=Ve(r.deltaX,r.deltaY);var K=qe(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=K.x,r.overallVelocityY=K.y,r.overallVelocity=O(K.x)>O(K.y)?K.x:K.y,r.scale=D?$e(D.pointers,u):1,r.rotation=D?at(D.pointers,u):0,r.maxPointers=i.prevInput?r.pointers.length>i.prevInput.maxPointers?r.pointers.length:i.prevInput.maxPointers:r.pointers.length,ot(i,r);var se=e.element;U(r.srcEvent.target,se)&&(se=r.srcEvent.target),r.target=se}function it(e,r){var i=r.center,u=e.offsetDelta||{},d=e.prevDelta||{},E=e.prevInput||{};(r.eventType===G||E.eventType===z)&&(d=e.prevDelta={x:E.deltaX||0,y:E.deltaY||0},u=e.offsetDelta={x:i.x,y:i.y}),r.deltaX=d.x+(i.x-u.x),r.deltaY=d.y+(i.y-u.y)}function ot(e,r){var i=e.lastInterval||r,u=r.timeStamp-i.timeStamp,d,E,D,X;if(r.eventType!=Q&&(u>_t||i.velocity===v)){var V=r.deltaX-i.deltaX,K=r.deltaY-i.deltaY,se=qe(u,V,K);E=se.x,D=se.y,d=O(se.x)>O(se.y)?se.x:se.y,X=Ve(V,K),e.lastInterval=r}else d=i.velocity,E=i.velocityX,D=i.velocityY,X=i.direction;r.velocity=d,r.velocityX=E,r.velocityY=D,r.direction=X}function Xe(e){for(var r=[],i=0;i<e.pointers.length;)r[i]={clientX:R(e.pointers[i].clientX),clientY:R(e.pointers[i].clientY)},i++;return{timeStamp:J(),pointers:r,center:ke(r),deltaX:e.deltaX,deltaY:e.deltaY}}function ke(e){var r=e.length;if(r===1)return{x:R(e[0].clientX),y:R(e[0].clientY)};for(var i=0,u=0,d=0;d<r;)i+=e[d].clientX,u+=e[d].clientY,d++;return{x:R(i/r),y:R(u/r)}}function qe(e,r,i){return{x:r/e||0,y:i/e||0}}function Ve(e,r){return e===r?Re:O(e)>=O(r)?e<0?we:Se:r<0?Ne:te}function Ae(e,r,i){i||(i=Be);var u=r[i[0]]-e[i[0]],d=r[i[1]]-e[i[1]];return Math.sqrt(u*u+d*d)}function Le(e,r,i){i||(i=Be);var u=r[i[0]]-e[i[0]],d=r[i[1]]-e[i[1]];return Math.atan2(d,u)*180/Math.PI}function at(e,r){return Le(r[1],r[0],_e)+Le(e[1],e[0],_e)}function $e(e,r){return Ae(r[0],r[1],_e)/Ae(e[0],e[1],_e)}var It={mousedown:G,mousemove:ye,mouseup:z},wt="mousedown",Ge="mousemove mouseup";function Pe(){this.evEl=wt,this.evWin=Ge,this.pressed=!1,Z.apply(this,arguments)}B(Pe,Z,{handler:function(r){var i=It[r.type];i&G&&r.button===0&&(this.pressed=!0),i&ye&&r.which!==1&&(i=z),this.pressed&&(i&z&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[r],changedPointers:[r],pointerType:ze,srcEvent:r}))}});var St={pointerdown:G,pointermove:ye,pointerup:z,pointercancel:Q,pointerout:Q},ve={2:Ee,3:bt,4:ze,5:Et},st="pointerdown",ct="pointermove pointerup pointercancel";l.MSPointerEvent&&!l.PointerEvent&&(st="MSPointerDown",ct="MSPointerMove MSPointerUp MSPointerCancel");function Me(){this.evEl=st,this.evWin=ct,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B(Me,Z,{handler:function(r){var i=this.store,u=!1,d=r.type.toLowerCase().replace("ms",""),E=St[d],D=ve[r.pointerType]||r.pointerType,X=D==Ee,V=k(i,r.pointerId,"pointerId");E&G&&(r.button===0||X)?V<0&&(i.push(r),V=i.length-1):E&(z|Q)&&(u=!0),!(V<0)&&(i[V]=r,this.callback(this.manager,E,{pointers:i,changedPointers:[r],pointerType:D,srcEvent:r}),u&&i.splice(V,1))}});var Nt={touchstart:G,touchmove:ye,touchend:z,touchcancel:Q},Ct="touchstart",At="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=Ct,this.evWin=At,this.started=!1,Z.apply(this,arguments)}B(ut,Z,{handler:function(r){var i=Nt[r.type];if(i===G&&(this.started=!0),!!this.started){var u=Pt.call(this,r,i);i&(z|Q)&&u[0].length-u[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:u[0],changedPointers:u[1],pointerType:Ee,srcEvent:r})}}});function Pt(e,r){var i=$(e.touches),u=$(e.changedTouches);return r&(z|Q)&&(i=ie(i.concat(u),"identifier")),[i,u]}var Dt={touchstart:G,touchmove:ye,touchend:z,touchcancel:Q},xt="touchstart touchmove touchend touchcancel";function Ue(){this.evTarget=xt,this.targetIds={},Z.apply(this,arguments)}B(Ue,Z,{handler:function(r){var i=Dt[r.type],u=Ot.call(this,r,i);u&&this.callback(this.manager,i,{pointers:u[0],changedPointers:u[1],pointerType:Ee,srcEvent:r})}});function Ot(e,r){var i=$(e.touches),u=this.targetIds;if(r&(G|ye)&&i.length===1)return u[i[0].identifier]=!0,[i,i];var d,E,D=$(e.changedTouches),X=[],V=this.target;if(E=i.filter(function(K){return U(K.target,V)}),r===G)for(d=0;d<E.length;)u[E[d].identifier]=!0,d++;for(d=0;d<D.length;)u[D[d].identifier]&&X.push(D[d]),r&(z|Q)&&delete u[D[d].identifier],d++;if(X.length)return[ie(E.concat(X),"identifier"),X]}var Rt=2500,Ke=25;function je(){Z.apply(this,arguments);var e=Ie(this.handler,this);this.touch=new Ue(this.manager,e),this.mouse=new Pe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}B(je,Z,{handler:function(r,i,u){var d=u.pointerType==Ee,E=u.pointerType==ze;if(!(E&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)Bt.call(this,i,u);else if(E&&Lt.call(this,u))return;this.callback(r,i,u)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Bt(e,r){e&G?(this.primaryTouch=r.changedPointers[0].identifier,ft.call(this,r)):e&(z|Q)&&ft.call(this,r)}function ft(e){var r=e.changedPointers[0];if(r.identifier===this.primaryTouch){var i={x:r.clientX,y:r.clientY};this.lastTouches.push(i);var u=this.lastTouches,d=function(){var E=u.indexOf(i);E>-1&&u.splice(E,1)};setTimeout(d,Rt)}}function Lt(e){for(var r=e.srcEvent.clientX,i=e.srcEvent.clientY,u=0;u<this.lastTouches.length;u++){var d=this.lastTouches[u],E=Math.abs(r-d.x),D=Math.abs(i-d.y);if(E<=Ke&&D<=Ke)return!0}return!1}var lt=he(A.style,"touchAction"),ht=lt!==v,dt="compute",vt="auto",Qe="manipulation",Te="none",De="pan-x",xe="pan-y",Fe=pt();function Ze(e,r){this.manager=e,this.set(r)}Ze.prototype={set:function(e){e==dt&&(e=this.compute()),ht&&this.manager.element.style&&Fe[e]&&(this.manager.element.style[lt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return M(this.manager.recognizers,function(r){ue(r.options.enable,[r])&&(e=e.concat(r.getTouchAction()))}),Mt(e.join(" "))},preventDefaults:function(e){var r=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var u=this.actions,d=F(u,Te)&&!Fe[Te],E=F(u,xe)&&!Fe[xe],D=F(u,De)&&!Fe[De];if(d){var X=e.pointers.length===1,V=e.distance<2,K=e.deltaTime<250;if(X&&V&&K)return}if(!(D&&E)&&(d||E&&i&oe||D&&i&de))return this.preventSrc(r)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Mt(e){if(F(e,Te))return Te;var r=F(e,De),i=F(e,xe);return r&&i?Te:r||i?r?De:xe:F(e,Qe)?Qe:vt}function pt(){if(!ht)return!1;var e={},r=l.CSS&&l.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=r?l.CSS.supports("touch-action",i):!0}),e}var pe=1,ee=2,ne=4,me=8,re=me,be=16,ae=32;function le(e){this.options=H({},this.defaults,e||{}),this.id=We(),this.manager=null,this.options.enable=b(this.options.enable,!0),this.state=pe,this.simultaneous={},this.requireFail=[]}le.prototype={defaults:{},set:function(e){return H(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(S(e,"recognizeWith",this))return this;var r=this.simultaneous;return e=He(e,this),r[e.id]||(r[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return S(e,"dropRecognizeWith",this)?this:(e=He(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(S(e,"requireFailure",this))return this;var r=this.requireFail;return e=He(e,this),k(r,e)===-1&&(r.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(S(e,"dropRequireFailure",this))return this;e=He(e,this);var r=k(this.requireFail,e);return r>-1&&this.requireFail.splice(r,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var r=this,i=this.state;function u(d){r.manager.emit(d,e)}i<me&&u(r.options.event+Ye(i)),u(r.options.event),e.additionalEvent&&u(e.additionalEvent),i>=me&&u(r.options.event+Ye(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ae},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(ae|pe)))return!1;e++}return!0},recognize:function(e){var r=H({},e);if(!ue(this.options.enable,[this,r])){this.reset(),this.state=ae;return}this.state&(re|be|ae)&&(this.state=pe),this.state=this.process(r),this.state&(ee|ne|me|be)&&this.tryEmit(r)},process:function(e){},getTouchAction:function(){},reset:function(){}};function Ye(e){return e&be?"cancel":e&me?"end":e&ne?"move":e&ee?"start":""}function mt(e){return e==te?"down":e==Ne?"up":e==we?"left":e==Se?"right":""}function He(e,r){var i=r.manager;return i?i.get(e):e}function t(){le.apply(this,arguments)}B(t,le,{defaults:{pointers:1},attrTest:function(e){var r=this.options.pointers;return r===0||e.pointers.length===r},process:function(e){var r=this.state,i=e.eventType,u=r&(ee|ne),d=this.attrTest(e);return u&&(i&Q||!d)?r|be:u||d?i&z?r|me:r&ee?r|ne:ee:ae}});function o(){t.apply(this,arguments),this.pX=null,this.pY=null}B(o,t,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ce},getTouchAction:function(){var e=this.options.direction,r=[];return e&oe&&r.push(xe),e&de&&r.push(De),r},directionTest:function(e){var r=this.options,i=!0,u=e.distance,d=e.direction,E=e.deltaX,D=e.deltaY;return d&r.direction||(r.direction&oe?(d=E===0?Re:E<0?we:Se,i=E!=this.pX,u=Math.abs(e.deltaX)):(d=D===0?Re:D<0?Ne:te,i=D!=this.pY,u=Math.abs(e.deltaY))),e.direction=d,i&&u>r.threshold&&d&r.direction},attrTest:function(e){return t.prototype.attrTest.call(this,e)&&(this.state&ee||!(this.state&ee)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var r=mt(e.direction);r&&(e.additionalEvent=this.options.event+r),this._super.emit.call(this,e)}});function n(){t.apply(this,arguments)}B(n,t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ee)},emit:function(e){if(e.scale!==1){var r=e.scale<1?"in":"out";e.additionalEvent=this.options.event+r}this._super.emit.call(this,e)}});function s(){le.apply(this,arguments),this._timer=null,this._input=null}B(s,le,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[vt]},process:function(e){var r=this.options,i=e.pointers.length===r.pointers,u=e.distance<r.threshold,d=e.deltaTime>r.time;if(this._input=e,!u||!i||e.eventType&(z|Q)&&!d)this.reset();else if(e.eventType&G)this.reset(),this._timer=_(function(){this.state=re,this.tryEmit()},r.time,this);else if(e.eventType&z)return re;return ae},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===re&&(e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}});function c(){t.apply(this,arguments)}B(c,t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ee)}});function a(){t.apply(this,arguments)}B(a,t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:oe|de,pointers:1},getTouchAction:function(){return o.prototype.getTouchAction.call(this)},attrTest:function(e){var r=this.options.direction,i;return r&(oe|de)?i=e.overallVelocity:r&oe?i=e.overallVelocityX:r&de&&(i=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&O(i)>this.options.velocity&&e.eventType&z},emit:function(e){var r=mt(e.offsetDirection);r&&this.manager.emit(this.options.event+r,e),this.manager.emit(this.options.event,e)}});function f(){le.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}B(f,le,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qe]},process:function(e){var r=this.options,i=e.pointers.length===r.pointers,u=e.distance<r.threshold,d=e.deltaTime<r.time;if(this.reset(),e.eventType&G&&this.count===0)return this.failTimeout();if(u&&d&&i){if(e.eventType!=z)return this.failTimeout();var E=this.pTime?e.timeStamp-this.pTime<r.interval:!0,D=!this.pCenter||Ae(this.pCenter,e.center)<r.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!D||!E?this.count=1:this.count+=1,this._input=e;var X=this.count%r.taps;if(X===0)return this.hasRequireFailures()?(this._timer=_(function(){this.state=re,this.tryEmit()},r.interval,this),ee):re}return ae},failTimeout:function(){return this._timer=_(function(){this.state=ae},this.options.interval,this),ae},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==re&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function h(e,r){return r=r||{},r.recognizers=b(r.recognizers,h.defaults.preset),new y(e,r)}h.VERSION="2.0.7",h.defaults={domEvents:!1,touchAction:dt,enable:!0,inputTarget:null,inputClass:null,preset:[[c,{enable:!1}],[n,{enable:!1},["rotate"]],[a,{direction:oe}],[o,{direction:oe},["swipe"]],[f],[f,{event:"doubletap",taps:2},["tap"]],[s]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var p=1,m=2;function y(e,r){this.options=H({},h.defaults,r||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=tt(this),this.touchAction=new Ze(this,this.options.touchAction),w(this,!0),M(this.options.recognizers,function(i){var u=this.add(new i[0](i[1]));i[2]&&u.recognizeWith(i[2]),i[3]&&u.requireFailure(i[3])},this)}y.prototype={set:function(e){return H(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?m:p},recognize:function(e){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(e);var i,u=this.recognizers,d=r.curRecognizer;(!d||d&&d.state&re)&&(d=r.curRecognizer=null);for(var E=0;E<u.length;)i=u[E],r.stopped!==m&&(!d||i==d||i.canRecognizeWith(d))?i.recognize(e):i.reset(),!d&&i.state&(ee|ne|me)&&(d=r.curRecognizer=i),E++}},get:function(e){if(e instanceof le)return e;for(var r=this.recognizers,i=0;i<r.length;i++)if(r[i].options.event==e)return r[i];return null},add:function(e){if(S(e,"add",this))return this;var r=this.get(e.options.event);return r&&this.remove(r),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(S(e,"remove",this))return this;if(e=this.get(e),e){var r=this.recognizers,i=k(r,e);i!==-1&&(r.splice(i,1),this.touchAction.update())}return this},on:function(e,r){if(e!==v&&r!==v){var i=this.handlers;return M(q(e),function(u){i[u]=i[u]||[],i[u].push(r)}),this}},off:function(e,r){if(e!==v){var i=this.handlers;return M(q(e),function(u){r?i[u]&&i[u].splice(k(i[u],r),1):delete i[u]}),this}},emit:function(e,r){this.options.domEvents&&C(e,r);var i=this.handlers[e]&&this.handlers[e].slice();if(!(!i||!i.length)){r.type=e,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var u=0;u<i.length;)i[u](r),u++}},destroy:function(){this.element&&w(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function w(e,r){var i=e.element;if(i.style){var u;M(e.options.cssProps,function(d,E){u=he(i.style,E),r?(e.oldCssProps[u]=i.style[u],i.style[u]=d):i.style[u]=e.oldCssProps[u]||""}),r||(e.oldCssProps={})}}function C(e,r){var i=g.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=r,r.target.dispatchEvent(i)}H(h,{INPUT_START:G,INPUT_MOVE:ye,INPUT_END:z,INPUT_CANCEL:Q,STATE_POSSIBLE:pe,STATE_BEGAN:ee,STATE_CHANGED:ne,STATE_ENDED:me,STATE_RECOGNIZED:re,STATE_CANCELLED:be,STATE_FAILED:ae,DIRECTION_NONE:Re,DIRECTION_LEFT:we,DIRECTION_RIGHT:Se,DIRECTION_UP:Ne,DIRECTION_DOWN:te,DIRECTION_HORIZONTAL:oe,DIRECTION_VERTICAL:de,DIRECTION_ALL:Ce,Manager:y,Input:Z,TouchAction:Ze,TouchInput:Ue,MouseInput:Pe,PointerEventInput:Me,TouchMouseInput:je,SingleTouchInput:ut,Recognizer:le,AttrRecognizer:t,Tap:f,Pan:o,Swipe:a,Pinch:n,Rotate:c,Press:s,on:x,off:N,each:M,merge:ce,extend:W,assign:H,inherit:B,bindFn:Ie,prefixed:he});var L=typeof l<"u"?l:typeof self<"u"?self:{};L.Hammer=h,j.exports?j.exports=h:l[T]=h})(window,document,"Hammer")})(Ut)),Ut.exports}var Vt=qt();const Wt=kt(Vt);function yt(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ft={exports:{}};var zt;function $t(){return zt||(zt=1,(function(j,l){(function(g){j.exports=g()})(function(){return(function g(T,v,I){function A(O,J){if(!v[O]){if(!T[O]){var _=typeof yt=="function"&&yt;if(!J&&_)return _(O,!0);if(P)return P(O,!0);var S=new Error("Cannot find module '"+O+"'");throw S.code="MODULE_NOT_FOUND",S}var M=v[O]={exports:{}};T[O][0].call(M.exports,function(Y){var H=T[O][1][Y];return A(H||Y)},M,M.exports,g,T,v,I)}return v[O].exports}for(var P=typeof yt=="function"&&yt,R=0;R<I.length;R++)A(I[R]);return A})({1:[function(g,T,v){(function(I){var A=I.MutationObserver||I.WebKitMutationObserver,P;if(A){var R=0,O=new A(Y),J=I.document.createTextNode("");O.observe(J,{characterData:!0}),P=function(){J.data=R=++R%2}}else if(!I.setImmediate&&typeof I.MessageChannel<"u"){var _=new I.MessageChannel;_.port1.onmessage=Y,P=function(){_.port2.postMessage(0)}}else"document"in I&&"onreadystatechange"in I.document.createElement("script")?P=function(){var W=I.document.createElement("script");W.onreadystatechange=function(){Y(),W.onreadystatechange=null,W.parentNode.removeChild(W),W=null},I.document.documentElement.appendChild(W)}:P=function(){setTimeout(Y,0)};var S,M=[];function Y(){S=!0;for(var W,ce,B=M.length;B;){for(ce=M,M=[],W=-1;++W<B;)ce[W]();B=M.length}S=!1}T.exports=H;function H(W){M.push(W)===1&&!S&&P()}}).call(this,typeof gt<"u"?gt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(g,T,v){var I=g(1);function A(){}var P={},R=["REJECTED"],O=["FULFILLED"],J=["PENDING"];T.exports=_;function _(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=J,this.queue=[],this.outcome=void 0,b!==A&&H(this,b)}_.prototype.catch=function(b){return this.then(null,b)},_.prototype.then=function(b,x){if(typeof b!="function"&&this.state===O||typeof x!="function"&&this.state===R)return this;var N=new this.constructor(A);if(this.state!==J){var U=this.state===O?b:x;M(N,U,this.outcome)}else this.queue.push(new S(N,b,x));return N};function S(b,x,N){this.promise=b,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(b){P.resolve(this.promise,b)},S.prototype.otherCallFulfilled=function(b){M(this.promise,this.onFulfilled,b)},S.prototype.callRejected=function(b){P.reject(this.promise,b)},S.prototype.otherCallRejected=function(b){M(this.promise,this.onRejected,b)};function M(b,x,N){I(function(){var U;try{U=x(N)}catch(F){return P.reject(b,F)}U===b?P.reject(b,new TypeError("Cannot resolve promise with itself")):P.resolve(b,U)})}P.resolve=function(b,x){var N=W(Y,x);if(N.status==="error")return P.reject(b,N.value);var U=N.value;if(U)H(b,U);else{b.state=O,b.outcome=x;for(var F=-1,q=b.queue.length;++F<q;)b.queue[F].callFulfilled(x)}return b},P.reject=function(b,x){b.state=R,b.outcome=x;for(var N=-1,U=b.queue.length;++N<U;)b.queue[N].callRejected(x);return b};function Y(b){var x=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof x=="function")return function(){x.apply(b,arguments)}}function H(b,x){var N=!1;function U($){N||(N=!0,P.reject(b,$))}function F($){N||(N=!0,P.resolve(b,$))}function q(){x(F,U)}var k=W(q);k.status==="error"&&U(k.value)}function W(b,x){var N={};try{N.value=b(x),N.status="success"}catch(U){N.status="error",N.value=U}return N}_.resolve=ce;function ce(b){return b instanceof this?b:P.resolve(new this(A),b)}_.reject=B;function B(b){var x=new this(A);return P.reject(x,b)}_.all=Ie;function Ie(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=b.length,U=!1;if(!N)return this.resolve([]);for(var F=new Array(N),q=0,k=-1,$=new this(A);++k<N;)ie(b[k],k);return $;function ie(he,Oe){x.resolve(he).then(We,function(ge){U||(U=!0,P.reject($,ge))});function We(ge){F[Oe]=ge,++q===N&&!U&&(U=!0,P.resolve($,F))}}}_.race=ue;function ue(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=b.length,U=!1;if(!N)return this.resolve([]);for(var F=-1,q=new this(A);++F<N;)k(b[F]);return q;function k($){x.resolve($).then(function(ie){U||(U=!0,P.resolve(q,ie))},function(ie){U||(U=!0,P.reject(q,ie))})}}},{1:1}],3:[function(g,T,v){(function(I){typeof I.Promise!="function"&&(I.Promise=g(2))}).call(this,typeof gt<"u"?gt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(g,T,v){var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function A(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function P(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var R=P();function O(){try{if(!R||!R.open)return!1;var t=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),o=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||o)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function J(t,o){t=t||[],o=o||{};try{return new Blob(t,o)}catch(a){if(a.name!=="TypeError")throw a;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,s=new n,c=0;c<t.length;c+=1)s.append(t[c]);return s.getBlob(o.type)}}typeof Promise>"u"&&g(3);var _=Promise;function S(t,o){o&&t.then(function(n){o(null,n)},function(n){o(n)})}function M(t,o,n){typeof o=="function"&&t.then(o),typeof n=="function"&&t.catch(n)}function Y(t){return typeof t!="string"&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function H(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var W="local-forage-detect-blob-support",ce=void 0,B={},Ie=Object.prototype.toString,ue="readonly",b="readwrite";function x(t){for(var o=t.length,n=new ArrayBuffer(o),s=new Uint8Array(n),c=0;c<o;c++)s[c]=t.charCodeAt(c);return n}function N(t){return new _(function(o){var n=t.transaction(W,b),s=J([""]);n.objectStore(W).put(s,"key"),n.onabort=function(c){c.preventDefault(),c.stopPropagation(),o(!1)},n.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),a=navigator.userAgent.match(/Edge\//);o(a||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function U(t){return typeof ce=="boolean"?_.resolve(ce):N(t).then(function(o){return ce=o,ce})}function F(t){var o=B[t.name],n={};n.promise=new _(function(s,c){n.resolve=s,n.reject=c}),o.deferredOperations.push(n),o.dbReady?o.dbReady=o.dbReady.then(function(){return n.promise}):o.dbReady=n.promise}function q(t){var o=B[t.name],n=o.deferredOperations.pop();if(n)return n.resolve(),n.promise}function k(t,o){var n=B[t.name],s=n.deferredOperations.pop();if(s)return s.reject(o),s.promise}function $(t,o){return new _(function(n,s){if(B[t.name]=B[t.name]||Ee(),t.db)if(o)F(t),t.db.close();else return n(t.db);var c=[t.name];o&&c.push(t.version);var a=R.open.apply(R,c);o&&(a.onupgradeneeded=function(f){var h=a.result;try{h.createObjectStore(t.storeName),f.oldVersion<=1&&h.createObjectStore(W)}catch(p){if(p.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+f.oldVersion+" to version "+f.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw p}}),a.onerror=function(f){f.preventDefault(),s(a.error)},a.onsuccess=function(){var f=a.result;f.onversionchange=function(h){h.target.close()},n(f),q(t)}})}function ie(t){return $(t,!1)}function he(t){return $(t,!0)}function Oe(t,o){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),s=t.version<t.db.version,c=t.version>t.db.version;if(s&&(t.version!==o&&console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+"."),t.version=t.db.version),c||n){if(n){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}function We(t){return new _(function(o,n){var s=new FileReader;s.onerror=n,s.onloadend=function(c){var a=btoa(c.target.result||"");o({__local_forage_encoded_blob:!0,data:a,type:t.type})},s.readAsBinaryString(t)})}function ge(t){var o=x(atob(t.data));return J([o],{type:t.type})}function Je(t){return t&&t.__local_forage_encoded_blob}function et(t){var o=this,n=o._initReady().then(function(){var s=B[o._dbInfo.name];if(s&&s.dbReady)return s.dbReady});return M(n,t,t),n}function Tt(t){F(t);for(var o=B[t.name],n=o.forages,s=0;s<n.length;s++){var c=n[s];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return t.db=null,ie(t).then(function(a){return t.db=a,Oe(t)?he(t):a}).then(function(a){t.db=o.db=a;for(var f=0;f<n.length;f++)n[f]._dbInfo.db=a}).catch(function(a){throw k(t,a),a})}function fe(t,o,n,s){s===void 0&&(s=1);try{var c=t.db.transaction(t.storeName,o);n(null,c)}catch(a){if(s>0&&(!t.db||a.name==="InvalidStateError"||a.name==="NotFoundError"))return _.resolve().then(function(){if(!t.db||a.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),he(t)}).then(function(){return Tt(t).then(function(){fe(t,o,n,s-1)})}).catch(n);n(a)}}function Ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function bt(t){var o=this,n={db:null};if(t)for(var s in t)n[s]=t[s];var c=B[n.name];c||(c=Ee(),B[n.name]=c),c.forages.push(o),o._initReady||(o._initReady=o.ready,o.ready=et);var a=[];function f(){return _.resolve()}for(var h=0;h<c.forages.length;h++){var p=c.forages[h];p!==o&&a.push(p._initReady().catch(f))}var m=c.forages.slice(0);return _.all(a).then(function(){return n.db=c.db,ie(n)}).then(function(y){return n.db=y,Oe(n,o._defaultConfig.version)?he(n):y}).then(function(y){n.db=c.db=y,o._dbInfo=n;for(var w=0;w<m.length;w++){var C=m[w];C!==o&&(C._dbInfo.db=n.db,C._dbInfo.version=n.version)}})}function ze(t,o){var n=this;t=Y(t);var s=new _(function(c,a){n.ready().then(function(){fe(n._dbInfo,ue,function(f,h){if(f)return a(f);try{var p=h.objectStore(n._dbInfo.storeName),m=p.get(t);m.onsuccess=function(){var y=m.result;y===void 0&&(y=null),Je(y)&&(y=ge(y)),c(y)},m.onerror=function(){a(m.error)}}catch(y){a(y)}})}).catch(a)});return S(s,o),s}function Et(t,o){var n=this,s=new _(function(c,a){n.ready().then(function(){fe(n._dbInfo,ue,function(f,h){if(f)return a(f);try{var p=h.objectStore(n._dbInfo.storeName),m=p.openCursor(),y=1;m.onsuccess=function(){var w=m.result;if(w){var C=w.value;Je(C)&&(C=ge(C));var L=t(C,w.key,y++);L!==void 0?c(L):w.continue()}else c()},m.onerror=function(){a(m.error)}}catch(w){a(w)}})}).catch(a)});return S(s,o),s}function _t(t,o,n){var s=this;t=Y(t);var c=new _(function(a,f){var h;s.ready().then(function(){return h=s._dbInfo,Ie.call(o)==="[object Blob]"?U(h.db).then(function(p){return p?o:We(o)}):o}).then(function(p){fe(s._dbInfo,b,function(m,y){if(m)return f(m);try{var w=y.objectStore(s._dbInfo.storeName);p===null&&(p=void 0);var C=w.put(p,t);y.oncomplete=function(){p===void 0&&(p=null),a(p)},y.onabort=y.onerror=function(){var L=C.error?C.error:C.transaction.error;f(L)}}catch(L){f(L)}})}).catch(f)});return S(c,n),c}function G(t,o){var n=this;t=Y(t);var s=new _(function(c,a){n.ready().then(function(){fe(n._dbInfo,b,function(f,h){if(f)return a(f);try{var p=h.objectStore(n._dbInfo.storeName),m=p.delete(t);h.oncomplete=function(){c()},h.onerror=function(){a(m.error)},h.onabort=function(){var y=m.error?m.error:m.transaction.error;a(y)}}catch(y){a(y)}})}).catch(a)});return S(s,o),s}function ye(t){var o=this,n=new _(function(s,c){o.ready().then(function(){fe(o._dbInfo,b,function(a,f){if(a)return c(a);try{var h=f.objectStore(o._dbInfo.storeName),p=h.clear();f.oncomplete=function(){s()},f.onabort=f.onerror=function(){var m=p.error?p.error:p.transaction.error;c(m)}}catch(m){c(m)}})}).catch(c)});return S(n,t),n}function z(t){var o=this,n=new _(function(s,c){o.ready().then(function(){fe(o._dbInfo,ue,function(a,f){if(a)return c(a);try{var h=f.objectStore(o._dbInfo.storeName),p=h.count();p.onsuccess=function(){s(p.result)},p.onerror=function(){c(p.error)}}catch(m){c(m)}})}).catch(c)});return S(n,t),n}function Q(t,o){var n=this,s=new _(function(c,a){if(t<0){c(null);return}n.ready().then(function(){fe(n._dbInfo,ue,function(f,h){if(f)return a(f);try{var p=h.objectStore(n._dbInfo.storeName),m=!1,y=p.openKeyCursor();y.onsuccess=function(){var w=y.result;if(!w){c(null);return}t===0||m?c(w.key):(m=!0,w.advance(t))},y.onerror=function(){a(y.error)}}catch(w){a(w)}})}).catch(a)});return S(s,o),s}function Re(t){var o=this,n=new _(function(s,c){o.ready().then(function(){fe(o._dbInfo,ue,function(a,f){if(a)return c(a);try{var h=f.objectStore(o._dbInfo.storeName),p=h.openKeyCursor(),m=[];p.onsuccess=function(){var y=p.result;if(!y){s(m);return}m.push(y.key),y.continue()},p.onerror=function(){c(p.error)}}catch(y){c(y)}})}).catch(c)});return S(n,t),n}function we(t,o){o=H.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;if(!t.name)c=_.reject("Invalid arguments");else{var a=t.name===n.name&&s._dbInfo.db,f=a?_.resolve(s._dbInfo.db):ie(t).then(function(h){var p=B[t.name],m=p.forages;p.db=h;for(var y=0;y<m.length;y++)m[y]._dbInfo.db=h;return h});t.storeName?c=f.then(function(h){if(h.objectStoreNames.contains(t.storeName)){var p=h.version+1;F(t);var m=B[t.name],y=m.forages;h.close();for(var w=0;w<y.length;w++){var C=y[w];C._dbInfo.db=null,C._dbInfo.version=p}var L=new _(function(e,r){var i=R.open(t.name,p);i.onerror=function(u){var d=i.result;d.close(),r(u)},i.onupgradeneeded=function(){var u=i.result;u.deleteObjectStore(t.storeName)},i.onsuccess=function(){var u=i.result;u.close(),e(u)}});return L.then(function(e){m.db=e;for(var r=0;r<y.length;r++){var i=y[r];i._dbInfo.db=e,q(i._dbInfo)}}).catch(function(e){throw(k(t,e)||_.resolve()).catch(function(){}),e})}}):c=f.then(function(h){F(t);var p=B[t.name],m=p.forages;h.close();for(var y=0;y<m.length;y++){var w=m[y];w._dbInfo.db=null}var C=new _(function(L,e){var r=R.deleteDatabase(t.name);r.onerror=function(){var i=r.result;i&&i.close(),e(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var i=r.result;i&&i.close(),L(i)}});return C.then(function(L){p.db=L;for(var e=0;e<m.length;e++){var r=m[e];q(r._dbInfo)}}).catch(function(L){throw(k(t,L)||_.resolve()).catch(function(){}),L})})}return S(c,o),c}var Se={_driver:"asyncStorage",_initStorage:bt,_support:O(),iterate:Et,getItem:ze,setItem:_t,removeItem:G,clear:ye,length:z,key:Q,keys:Re,dropInstance:we};function Ne(){return typeof openDatabase=="function"}var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe="~~local_forage_type~",de=/^~~local_forage_type~([^~]+)~/,Ce="__lfsc__:",Be=Ce.length,_e="arbf",Z="blob",tt="si08",rt="ui08",nt="uic8",it="si16",ot="si32",Xe="ur16",ke="ui32",qe="fl32",Ve="fl64",Ae=Be+_e.length,Le=Object.prototype.toString;function at(t){var o=t.length*.75,n=t.length,s,c=0,a,f,h,p;t[t.length-1]==="="&&(o--,t[t.length-2]==="="&&o--);var m=new ArrayBuffer(o),y=new Uint8Array(m);for(s=0;s<n;s+=4)a=te.indexOf(t[s]),f=te.indexOf(t[s+1]),h=te.indexOf(t[s+2]),p=te.indexOf(t[s+3]),y[c++]=a<<2|f>>4,y[c++]=(f&15)<<4|h>>2,y[c++]=(h&3)<<6|p&63;return m}function $e(t){var o=new Uint8Array(t),n="",s;for(s=0;s<o.length;s+=3)n+=te[o[s]>>2],n+=te[(o[s]&3)<<4|o[s+1]>>4],n+=te[(o[s+1]&15)<<2|o[s+2]>>6],n+=te[o[s+2]&63];return o.length%3===2?n=n.substring(0,n.length-1)+"=":o.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function It(t,o){var n="";if(t&&(n=Le.call(t)),t&&(n==="[object ArrayBuffer]"||t.buffer&&Le.call(t.buffer)==="[object ArrayBuffer]")){var s,c=Ce;t instanceof ArrayBuffer?(s=t,c+=_e):(s=t.buffer,n==="[object Int8Array]"?c+=tt:n==="[object Uint8Array]"?c+=rt:n==="[object Uint8ClampedArray]"?c+=nt:n==="[object Int16Array]"?c+=it:n==="[object Uint16Array]"?c+=Xe:n==="[object Int32Array]"?c+=ot:n==="[object Uint32Array]"?c+=ke:n==="[object Float32Array]"?c+=qe:n==="[object Float64Array]"?c+=Ve:o(new Error("Failed to get type for BinaryArray"))),o(c+$e(s))}else if(n==="[object Blob]"){var a=new FileReader;a.onload=function(){var f=oe+t.type+"~"+$e(this.result);o(Ce+Z+f)},a.readAsArrayBuffer(t)}else try{o(JSON.stringify(t))}catch(f){console.error("Couldn't convert value into a JSON string: ",t),o(null,f)}}function wt(t){if(t.substring(0,Be)!==Ce)return JSON.parse(t);var o=t.substring(Ae),n=t.substring(Be,Ae),s;if(n===Z&&de.test(o)){var c=o.match(de);s=c[1],o=o.substring(c[0].length)}var a=at(o);switch(n){case _e:return a;case Z:return J([a],{type:s});case tt:return new Int8Array(a);case rt:return new Uint8Array(a);case nt:return new Uint8ClampedArray(a);case it:return new Int16Array(a);case Xe:return new Uint16Array(a);case ot:return new Int32Array(a);case ke:return new Uint32Array(a);case qe:return new Float32Array(a);case Ve:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}}var Ge={serialize:It,deserialize:wt,stringToBuffer:at,bufferToString:$e};function Pe(t,o,n,s){t.executeSql("CREATE TABLE IF NOT EXISTS "+o.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,s)}function St(t){var o=this,n={db:null};if(t)for(var s in t)n[s]=typeof t[s]!="string"?t[s].toString():t[s];var c=new _(function(a,f){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(h){return f(h)}n.db.transaction(function(h){Pe(h,n,function(){o._dbInfo=n,a()},function(p,m){f(m)})},f)});return n.serializer=Ge,c}function ve(t,o,n,s,c,a){t.executeSql(n,s,c,function(f,h){h.code===h.SYNTAX_ERR?f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[o.storeName],function(p,m){m.rows.length?a(p,h):Pe(p,o,function(){p.executeSql(n,s,c,a)},a)},a):a(f,h)},a)}function st(t,o){var n=this;t=Y(t);var s=new _(function(c,a){n.ready().then(function(){var f=n._dbInfo;f.db.transaction(function(h){ve(h,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[t],function(p,m){var y=m.rows.length?m.rows.item(0).value:null;y&&(y=f.serializer.deserialize(y)),c(y)},function(p,m){a(m)})})}).catch(a)});return S(s,o),s}function ct(t,o){var n=this,s=new _(function(c,a){n.ready().then(function(){var f=n._dbInfo;f.db.transaction(function(h){ve(h,f,"SELECT * FROM "+f.storeName,[],function(p,m){for(var y=m.rows,w=y.length,C=0;C<w;C++){var L=y.item(C),e=L.value;if(e&&(e=f.serializer.deserialize(e)),e=t(e,L.key,C+1),e!==void 0){c(e);return}}c()},function(p,m){a(m)})})}).catch(a)});return S(s,o),s}function Me(t,o,n,s){var c=this;t=Y(t);var a=new _(function(f,h){c.ready().then(function(){o===void 0&&(o=null);var p=o,m=c._dbInfo;m.serializer.serialize(o,function(y,w){w?h(w):m.db.transaction(function(C){ve(C,m,"INSERT OR REPLACE INTO "+m.storeName+" (key, value) VALUES (?, ?)",[t,y],function(){f(p)},function(L,e){h(e)})},function(C){if(C.code===C.QUOTA_ERR){if(s>0){f(Me.apply(c,[t,p,n,s-1]));return}h(C)}})})}).catch(h)});return S(a,n),a}function Nt(t,o,n){return Me.apply(this,[t,o,n,1])}function Ct(t,o){var n=this;t=Y(t);var s=new _(function(c,a){n.ready().then(function(){var f=n._dbInfo;f.db.transaction(function(h){ve(h,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[t],function(){c()},function(p,m){a(m)})})}).catch(a)});return S(s,o),s}function At(t){var o=this,n=new _(function(s,c){o.ready().then(function(){var a=o._dbInfo;a.db.transaction(function(f){ve(f,a,"DELETE FROM "+a.storeName,[],function(){s()},function(h,p){c(p)})})}).catch(c)});return S(n,t),n}function ut(t){var o=this,n=new _(function(s,c){o.ready().then(function(){var a=o._dbInfo;a.db.transaction(function(f){ve(f,a,"SELECT COUNT(key) as c FROM "+a.storeName,[],function(h,p){var m=p.rows.item(0).c;s(m)},function(h,p){c(p)})})}).catch(c)});return S(n,t),n}function Pt(t,o){var n=this,s=new _(function(c,a){n.ready().then(function(){var f=n._dbInfo;f.db.transaction(function(h){ve(h,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[t+1],function(p,m){var y=m.rows.length?m.rows.item(0).key:null;c(y)},function(p,m){a(m)})})}).catch(a)});return S(s,o),s}function Dt(t){var o=this,n=new _(function(s,c){o.ready().then(function(){var a=o._dbInfo;a.db.transaction(function(f){ve(f,a,"SELECT key FROM "+a.storeName,[],function(h,p){for(var m=[],y=0;y<p.rows.length;y++)m.push(p.rows.item(y).key);s(m)},function(h,p){c(p)})})}).catch(c)});return S(n,t),n}function xt(t){return new _(function(o,n){t.transaction(function(s){s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,a){for(var f=[],h=0;h<a.rows.length;h++)f.push(a.rows.item(h).name);o({db:t,storeNames:f})},function(c,a){n(a)})},function(s){n(s)})})}function Ue(t,o){o=H.apply(this,arguments);var n=this.config();t=typeof t!="function"&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var s=this,c;return t.name?c=new _(function(a){var f;t.name===n.name?f=s._dbInfo.db:f=openDatabase(t.name,"","",0),t.storeName?a({db:f,storeNames:[t.storeName]}):a(xt(f))}).then(function(a){return new _(function(f,h){a.db.transaction(function(p){function m(L){return new _(function(e,r){p.executeSql("DROP TABLE IF EXISTS "+L,[],function(){e()},function(i,u){r(u)})})}for(var y=[],w=0,C=a.storeNames.length;w<C;w++)y.push(m(a.storeNames[w]));_.all(y).then(function(){f()}).catch(function(L){h(L)})},function(p){h(p)})})}):c=_.reject("Invalid arguments"),S(c,o),c}var Ot={_driver:"webSQLStorage",_initStorage:St,_support:Ne(),iterate:ct,getItem:st,setItem:Nt,removeItem:Ct,clear:At,length:ut,key:Pt,keys:Dt,dropInstance:Ue};function Rt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ke(t,o){var n=t.name+"/";return t.storeName!==o.storeName&&(n+=t.storeName+"/"),n}function je(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch{return!0}}function Bt(){return!je()||localStorage.length>0}function ft(t){var o=this,n={};if(t)for(var s in t)n[s]=t[s];return n.keyPrefix=Ke(t,o._defaultConfig),Bt()?(o._dbInfo=n,n.serializer=Ge,_.resolve()):_.reject()}function Lt(t){var o=this,n=o.ready().then(function(){for(var s=o._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var a=localStorage.key(c);a.indexOf(s)===0&&localStorage.removeItem(a)}});return S(n,t),n}function lt(t,o){var n=this;t=Y(t);var s=n.ready().then(function(){var c=n._dbInfo,a=localStorage.getItem(c.keyPrefix+t);return a&&(a=c.serializer.deserialize(a)),a});return S(s,o),s}function ht(t,o){var n=this,s=n.ready().then(function(){for(var c=n._dbInfo,a=c.keyPrefix,f=a.length,h=localStorage.length,p=1,m=0;m<h;m++){var y=localStorage.key(m);if(y.indexOf(a)===0){var w=localStorage.getItem(y);if(w&&(w=c.serializer.deserialize(w)),w=t(w,y.substring(f),p++),w!==void 0)return w}}});return S(s,o),s}function dt(t,o){var n=this,s=n.ready().then(function(){var c=n._dbInfo,a;try{a=localStorage.key(t)}catch{a=null}return a&&(a=a.substring(c.keyPrefix.length)),a});return S(s,o),s}function vt(t){var o=this,n=o.ready().then(function(){for(var s=o._dbInfo,c=localStorage.length,a=[],f=0;f<c;f++){var h=localStorage.key(f);h.indexOf(s.keyPrefix)===0&&a.push(h.substring(s.keyPrefix.length))}return a});return S(n,t),n}function Qe(t){var o=this,n=o.keys().then(function(s){return s.length});return S(n,t),n}function Te(t,o){var n=this;t=Y(t);var s=n.ready().then(function(){var c=n._dbInfo;localStorage.removeItem(c.keyPrefix+t)});return S(s,o),s}function De(t,o,n){var s=this;t=Y(t);var c=s.ready().then(function(){o===void 0&&(o=null);var a=o;return new _(function(f,h){var p=s._dbInfo;p.serializer.serialize(o,function(m,y){if(y)h(y);else try{localStorage.setItem(p.keyPrefix+t,m),f(a)}catch(w){(w.name==="QuotaExceededError"||w.name==="NS_ERROR_DOM_QUOTA_REACHED")&&h(w),h(w)}})})});return S(c,n),c}function xe(t,o){if(o=H.apply(this,arguments),t=typeof t!="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var s=this,c;return t.name?c=new _(function(a){t.storeName?a(Ke(t,s._defaultConfig)):a(t.name+"/")}).then(function(a){for(var f=localStorage.length-1;f>=0;f--){var h=localStorage.key(f);h.indexOf(a)===0&&localStorage.removeItem(h)}}):c=_.reject("Invalid arguments"),S(c,o),c}var Fe={_driver:"localStorageWrapper",_initStorage:ft,_support:Rt(),iterate:ht,getItem:lt,setItem:De,removeItem:Te,clear:Lt,length:Qe,key:dt,keys:vt,dropInstance:xe},Ze=function(o,n){return o===n||typeof o=="number"&&typeof n=="number"&&isNaN(o)&&isNaN(n)},Mt=function(o,n){for(var s=o.length,c=0;c<s;){if(Ze(o[c],n))return!0;c++}return!1},pt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},pe={},ee={},ne={INDEXEDDB:Se,WEBSQL:Ot,LOCALSTORAGE:Fe},me=[ne.INDEXEDDB._driver,ne.WEBSQL._driver,ne.LOCALSTORAGE._driver],re=["dropInstance"],be=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(re),ae={description:"",driver:me.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function le(t,o){t[o]=function(){var n=arguments;return t.ready().then(function(){return t[o].apply(t,n)})}}function Ye(){for(var t=1;t<arguments.length;t++){var o=arguments[t];if(o)for(var n in o)o.hasOwnProperty(n)&&(pt(o[n])?arguments[0][n]=o[n].slice():arguments[0][n]=o[n])}return arguments[0]}var mt=(function(){function t(o){A(this,t);for(var n in ne)if(ne.hasOwnProperty(n)){var s=ne[n],c=s._driver;this[n]=c,pe[c]||this.defineDriver(s)}this._defaultConfig=Ye({},ae),this._config=Ye({},this._defaultConfig,o),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(n){if((typeof n>"u"?"undefined":I(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in n){if(s==="storeName"&&(n[s]=n[s].replace(/\W/g,"_")),s==="version"&&typeof n[s]!="number")return new Error("Database version must be a number.");this._config[s]=n[s]}return"driver"in n&&n.driver?this.setDriver(this._config.driver):!0}else return typeof n=="string"?this._config[n]:this._config},t.prototype.defineDriver=function(n,s,c){var a=new _(function(f,h){try{var p=n._driver,m=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){h(m);return}for(var y=be.concat("_initStorage"),w=0,C=y.length;w<C;w++){var L=y[w],e=!Mt(re,L);if((e||n[L])&&typeof n[L]!="function"){h(m);return}}var r=function(){for(var d=function(K){return function(){var se=new Error("Method "+K+" is not implemented by the current driver"),Yt=_.reject(se);return S(Yt,arguments[arguments.length-1]),Yt}},E=0,D=re.length;E<D;E++){var X=re[E];n[X]||(n[X]=d(X))}};r();var i=function(d){pe[p]&&console.info("Redefining LocalForage driver: "+p),pe[p]=n,ee[p]=d,f()};"_support"in n?n._support&&typeof n._support=="function"?n._support().then(i,h):i(!!n._support):i(!0)}catch(u){h(u)}});return M(a,s,c),a},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(n,s,c){var a=pe[n]?_.resolve(pe[n]):_.reject(new Error("Driver not found."));return M(a,s,c),a},t.prototype.getSerializer=function(n){var s=_.resolve(Ge);return M(s,n),s},t.prototype.ready=function(n){var s=this,c=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return M(c,n,n),c},t.prototype.setDriver=function(n,s,c){var a=this;pt(n)||(n=[n]);var f=this._getSupportedDrivers(n);function h(){a._config.driver=a.driver()}function p(w){return a._extend(w),h(),a._ready=a._initStorage(a._config),a._ready}function m(w){return function(){var C=0;function L(){for(;C<w.length;){var e=w[C];return C++,a._dbInfo=null,a._ready=null,a.getDriver(e).then(p).catch(L)}h();var r=new Error("No available storage method found.");return a._driverSet=_.reject(r),a._driverSet}return L()}}var y=this._driverSet!==null?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=y.then(function(){var w=f[0];return a._dbInfo=null,a._ready=null,a.getDriver(w).then(function(C){a._driver=C._driver,h(),a._wrapLibraryMethodsWithReady(),a._initDriver=m(f)})}).catch(function(){h();var w=new Error("No available storage method found.");return a._driverSet=_.reject(w),a._driverSet}),M(this._driverSet,s,c),this._driverSet},t.prototype.supports=function(n){return!!ee[n]},t.prototype._extend=function(n){Ye(this,n)},t.prototype._getSupportedDrivers=function(n){for(var s=[],c=0,a=n.length;c<a;c++){var f=n[c];this.supports(f)&&s.push(f)}return s},t.prototype._wrapLibraryMethodsWithReady=function(){for(var n=0,s=be.length;n<s;n++)le(this,be[n])},t.prototype.createInstance=function(n){return new t(n)},t})(),He=new mt;T.exports=He},{3:3}]},{},[4])(4)})})(Ft)),Ft.exports}var Gt=$t();const Xt=kt(Gt);class Kt{constructor(){this.boards=[],this.currentBoardId=null,this.saveTimeout=null,this.pawnCounter=0,this.init()}async init(){this.initDOM(),this.setupEventListeners(),await this.loadData(),this.setupMobileOptimizations()}initDOM(){if(this.container=document.querySelector("#container"),this.toolbarDiv=document.querySelector(".toolbar"),this.deleteButton=document.querySelector(".delete"),this.newBoardButton=document.querySelector(".new"),this.addBoardButton=document.querySelector(".addBoard"),this.addPawnButton=document.querySelector(".addPawn"),this.bgImage=document.querySelector(".bg"),!this.container){console.error("Container element #container not found");return}console.log("DOM initialized successfully"),this.updateUI()}setupEventListeners(){this.newBoardButton?.addEventListener("click",()=>this.createNewBoard()),this.addBoardButton?.addEventListener("click",()=>this.uploadBoardImage()),this.addPawnButton?.addEventListener("click",()=>this.addPawn()),this.deleteButton?.addEventListener("click",()=>this.deleteCurrentBoard()),document.addEventListener("keydown",l=>this.handleKeyboard(l))}setupMobileOptimizations(){let l=0;document.addEventListener("touchend",g=>{const T=Date.now();T-l<=300&&g.preventDefault(),l=T},!1),document.addEventListener("contextmenu",g=>g.preventDefault()),document.addEventListener("touchmove",g=>{g.touches.length>1&&g.preventDefault()},{passive:!1})}async loadData(){try{const l=await Xt.getItem("brawrd-data");l&&Array.isArray(l)&&(this.boards=l,this.boards.length>0&&this.switchToBoard(this.boards[0].id)),console.log("Loaded boards:",this.boards.length)}catch(l){console.error("Failed to load data:",l)}}debouncedSave(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(async()=>{try{await Xt.setItem("brawrd-data",this.boards),console.log("Data saved successfully")}catch(l){console.error("Failed to save data:",l)}},1e3)}createNewBoard(){const l=prompt("Board name:");if(!l?.trim())return;const g={id:`board-${Date.now()}`,name:l.trim(),pawns:[],boardData:null};this.boards.push(g),this.switchToBoard(g.id),this.debouncedSave(),this.hapticFeedback("light")}switchToBoard(l){this.currentBoardId=l,this.renderCurrentBoard(),this.updateUI()}getCurrentBoard(){return this.boards.find(l=>l.id===this.currentBoardId)||null}renderCurrentBoard(){this.container.querySelectorAll(".pawn").forEach(v=>v.remove());const g=this.getCurrentBoard();let T=this.container.querySelector(".bg");if(T||(T=document.createElement("img"),T.className="bg",T.style.cssText=`
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1;
      `,this.container.appendChild(T)),!g){T.src="",T.style.display="none";return}g.boardData?(T.src=g.boardData,T.style.display="block"):(T.src="",T.style.display="none"),g.pawns.forEach(v=>this.renderPawn(v))}renderPawn(l){const g=document.createElement("div");g.classList.add("pawn"),g.dataset.pawnId=l.id,g.style.left=`${l.x}px`,g.style.top=`${l.y}px`,g.style.position="absolute",g.style.zIndex="10";const T=document.createElement("span");if(T.textContent=l.name,T.style.display="block",T.style.textAlign="center",T.style.background="rgba(0,0,0,0.7)",T.style.color="white",T.style.padding="2px 8px",T.style.borderRadius="12px",T.style.fontSize="0.8rem",T.style.marginBottom="4px",T.style.userSelect="none",g.appendChild(T),l.imageData){const v=document.createElement("img");v.src=l.imageData,v.style.width="60px",v.style.height="60px",v.style.borderRadius="50%",v.style.objectFit="cover",v.style.border="2px solid white",v.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",v.draggable=!1,g.appendChild(v)}else if(l.colorHex){const v=document.createElement("div");v.style.width="60px",v.style.height="60px",v.style.borderRadius="50%",v.style.backgroundColor=l.colorHex,v.style.border="2px solid white",v.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",g.appendChild(v)}this.container.appendChild(g),this.makePawnDraggable(g,l)}makePawnDraggable(l,g){const T=new Wt(l);T.get("pan").set({direction:Wt.DIRECTION_ALL});let v=0,I=0,A=!1;T.on("panstart",P=>{A=!0;const R=l.getBoundingClientRect(),O=this.container.getBoundingClientRect();v=R.left-O.left,I=R.top-O.top,l.style.zIndex="1000",l.style.transform="scale(1.1)",this.hapticFeedback("light")}),T.on("panmove",P=>{if(!A)return;const R=Math.max(0,Math.min(this.container.clientWidth-60,v+P.deltaX)),O=Math.max(0,Math.min(this.container.clientHeight-60,I+P.deltaY));l.style.left=`${R}px`,l.style.top=`${O}px`}),T.on("panend",P=>{A=!1,l.style.zIndex="10",l.style.transform="scale(1)";const R=parseInt(l.style.left),O=parseInt(l.style.top);this.updatePawnPosition(g.id,R,O),this.hapticFeedback("light")}),T.get("press").set({time:800}),T.on("press",()=>{confirm(`Delete pawn "${g.name}"?`)&&(this.deletePawn(g.id),this.hapticFeedback("heavy"))})}updatePawnPosition(l,g,T){const v=this.getCurrentBoard();if(!v)return;const I=v.pawns.find(A=>A.id===l);I&&(I.x=g,I.y=T,this.debouncedSave())}addPawn(){const l=prompt("Pawn name:");if(!l?.trim())return;confirm("Add image? (Cancel for color)")?this.uploadPawnImage(l.trim()):this.addColorPawn(l.trim())}addColorPawn(l){const g=prompt("Enter hex color (e.g., #ff0000):","#"+Math.floor(Math.random()*16777215).toString(16));if(!g)return;const T=this.getCurrentBoard();if(!T){alert("Please create a board first");return}const v={id:`pawn-${this.pawnCounter++}-${Date.now()}`,name:l,colorHex:g,x:Math.random()*Math.max(0,this.container.clientWidth-60),y:Math.random()*Math.max(0,this.container.clientHeight-60)};T.pawns.push(v),this.renderPawn(v),this.debouncedSave(),this.hapticFeedback("light")}uploadPawnImage(l){const g=document.createElement("input");g.type="file",g.accept="image/*",g.addEventListener("change",async T=>{const v=g.files?.[0];if(v)try{const I=await this.processImage(v,512),A=this.getCurrentBoard();if(!A){alert("Please create a board first");return}const P={id:`pawn-${this.pawnCounter++}-${Date.now()}`,name:l,imageData:I,x:Math.random()*Math.max(0,this.container.clientWidth-60),y:Math.random()*Math.max(0,this.container.clientHeight-60)};A.pawns.push(P),this.renderPawn(P),this.debouncedSave(),this.hapticFeedback("light")}catch(I){console.error("Image upload failed:",I),alert("Failed to upload image. Please try again.")}}),g.click()}uploadBoardImage(){const l=this.getCurrentBoard();if(!l){alert("Please create a board first");return}const g=document.createElement("input");g.type="file",g.accept="image/*",g.addEventListener("change",async T=>{const v=g.files?.[0];if(v)try{const I=await this.processImage(v,1920);l.boardData=I,this.renderCurrentBoard(),this.debouncedSave(),this.hapticFeedback("light")}catch(I){console.error("Board image upload failed:",I),alert("Failed to upload board image. Please try again.")}}),g.click()}async processImage(l,g=512){if(l.size>10*1024*1024)throw new Error("Image too large. Please choose an image under 10MB.");return new Promise((T,v)=>{const I=new Image;I.onload=()=>{try{const A=document.createElement("canvas"),P=A.getContext("2d"),R=Math.min(g/I.width,g/I.height,1);A.width=I.width*R,A.height=I.height*R,P.drawImage(I,0,0,A.width,A.height);const O=A.toDataURL("image/jpeg",.85);T(O)}catch(A){v(A)}},I.onerror=()=>v(new Error("Failed to load image")),I.src=URL.createObjectURL(l)})}deletePawn(l){const g=this.getCurrentBoard();if(!g)return;const T=g.pawns.findIndex(v=>v.id===l);if(T!==-1){g.pawns.splice(T,1);const v=document.querySelector(`[data-pawn-id="${l}"]`);v&&v.remove(),this.debouncedSave()}}deleteCurrentBoard(){if(!this.currentBoardId){alert("No board to delete");return}const l=this.getCurrentBoard();if(!l||!confirm(`Delete board "${l.name}"? This cannot be undone.`))return;const g=this.boards.findIndex(T=>T.id===this.currentBoardId);g!==-1&&(this.boards.splice(g,1),this.boards.length>0?this.switchToBoard(this.boards[0].id):(this.currentBoardId=null,this.container.innerHTML="",this.bgImage&&(this.bgImage.src="",this.bgImage.style.display="none")),this.updateUI(),this.debouncedSave(),this.hapticFeedback("heavy"))}updateUI(){const l=this.getCurrentBoard()!==null;this.toolbarDiv&&(this.toolbarDiv.style.display=l?"flex":"none"),this.deleteButton&&(this.deleteButton.style.display=l?"block":"none");const g=this.getCurrentBoard();g?document.title=`Brawrd - ${g.name}`:document.title="Brawrd - Board Editor",this.updateBoardSelector()}updateBoardSelector(){const l=document.querySelector(".board-selector");if(l&&l.remove(),this.boards.length<=1)return;const g=document.createElement("select");g.className="board-selector",g.style.cssText=`
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: white;
      z-index: 1001;
      font-size: 14px;
      min-width: 120px;
    `,this.boards.forEach(T=>{const v=document.createElement("option");v.value=T.id,v.textContent=T.name,v.selected=T.id===this.currentBoardId,g.appendChild(v)}),g.addEventListener("change",T=>{const v=T.target;this.switchToBoard(v.value)}),document.body.appendChild(g)}handleKeyboard(l){if(!(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement))switch(l.key){case"n":(l.ctrlKey||l.metaKey)&&(l.preventDefault(),this.createNewBoard());break;case"p":(l.ctrlKey||l.metaKey)&&(l.preventDefault(),this.addPawn());break;case"Delete":case"Backspace":(l.ctrlKey||l.metaKey)&&(l.preventDefault(),this.deleteCurrentBoard());break}}hapticFeedback(l="light"){if("vibrate"in navigator){const g={light:[10],medium:[20],heavy:[50]};navigator.vibrate(g[l])}}getState(){return{boards:this.boards,currentBoardId:this.currentBoardId,boardCount:this.boards.length,currentBoard:this.getCurrentBoard(),pawnsInCurrentBoard:this.getCurrentBoard()?.pawns.length||0}}exportData(){const l={version:"1.0",timestamp:new Date().toISOString(),boards:this.boards},g=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),T=URL.createObjectURL(g),v=document.createElement("a");v.href=T,v.download=`brawrd-export-${Date.now()}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(T)}importData(){const l=document.createElement("input");l.type="file",l.accept=".json",l.addEventListener("change",async g=>{const T=l.files?.[0];if(T)try{const v=await T.text(),I=JSON.parse(v);I.boards&&Array.isArray(I.boards)?confirm("Import data? This will replace your current boards.")&&(this.boards=I.boards,this.boards.length>0?this.switchToBoard(this.boards[0].id):(this.currentBoardId=null,this.renderCurrentBoard()),this.updateUI(),this.debouncedSave(),alert("Data imported successfully!")):alert("Invalid file format")}catch(v){console.error("Import failed:",v),alert("Failed to import data. Please check the file format.")}}),l.click()}}document.addEventListener("DOMContentLoaded",()=>{const j=new Kt;window.brawrd=j,console.log("Brawrd app initialized successfully"),console.log("Available commands: brawrd.getState(), brawrd.exportData(), brawrd.importData()")});
